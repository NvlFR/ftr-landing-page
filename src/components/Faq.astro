---

// src/components/Faq.astro

const faqData = [
  {
    question: "Berapa lama proses pembuatan chatbot dari awal hingga live?",
    answer: "Prosesnya bervariasi tergantung kompleksitas, namun rata-rata memakan waktu antara 1 hingga 3 minggu dari konsultasi awal hingga chatbot siap digunakan oleh pelanggan Anda.",
    category: "Proses"
  },
  {
    question: "Apakah saya perlu menyiapkan server atau hosting sendiri?",
    answer: "Tidak perlu. Layanan kami sudah termasuk cloud hosting untuk chatbot Anda, sehingga Anda tidak perlu memikirkan infrastruktur teknis sama sekali.",
    category: "Teknis"
  },
  {
    question: "Bagaimana model harganya? Apakah subscription atau sekali bayar?",
    answer: "Kami menawarkan model berlangganan (subscription) bulanan atau tahunan yang fleksibel. Biayanya sudah termasuk pembuatan, pemeliharaan, dan dukungan penuh. Hubungi kami untuk mendapatkan penawaran khusus.",
    category: "Harga"
  },
  {
    question: "Apakah chatbot bisa diintegrasikan dengan sistem internal perusahaan saya?",
    answer: "Tentu saja. Kami dapat melakukan integrasi khusus dengan sistem CRM, database produk, atau API internal lainnya yang Anda miliki untuk fungsionalitas yang lebih canggih.",
    category: "Integrasi"
  },
  {
    question: "Apakah chatbot bisa menangani banyak percakapan sekaligus?",
    answer: "Ya, chatbot kami dirancang untuk menangani ribuan percakapan secara bersamaan tanpa penurunan performa, sehingga cocok untuk bisnis dengan volume pelanggan tinggi.",
    category: "Kapasitas"
  },
  {
    question: "Bagaimana dengan keamanan data pelanggan?",
    answer: "Keamanan data adalah prioritas kami. Semua percakapan dienkripsi dan kami mematuhi regulasi perlindungan data seperti GDPR dan UU PDP Indonesia.",
    category: "Keamanan"
  }
];

// Get unique categories
const categories = [...new Set(faqData.map(item => item.category))];
categories.unshift("Semua"); // Add "All" option at the beginning

let activeCategory = "Semua";
---
<section id="faq" class="relative bg-gradient-to-b from-slate-50 to-white dark:from-gray-900 dark:to-gray-800 py-16 lg:py-24 overflow-hidden">
  <!-- Background decorative elements -->
  <div class="absolute top-0 right-0 w-72 h-72 bg-blue-200 rounded-full -translate-y-1/2 translate-x-1/2 opacity-20 dark:bg-blue-900/30 blur-3xl"></div>
  <div class="absolute bottom-0 left-0 w-80 h-80 bg-indigo-200 rounded-full translate-y-1/2 -translate-x-1/2 opacity-20 dark:bg-indigo-900/30 blur-3xl"></div>
  
  <div class="container mx-auto px-6 relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-12 animate-fade-in-up">
      <span class="inline-block px-4 py-1.5 text-sm font-medium bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400 rounded-full mb-4">
        FAQ
      </span>
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-slate-800 dark:text-white mb-4">
        Pertanyaan yang <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400">Sering Diajukan</span>
      </h2>
      <p class="max-w-2xl mx-auto text-lg md:text-xl text-slate-600 dark:text-gray-300">
        Temukan jawaban untuk pertanyaan umum seputar layanan chatbot AI WhatsApp kami.
      </p>
    </div>

    <!-- Category Filters -->
    <div class="flex flex-wrap justify-center gap-3 mb-12 animate-fade-in-up" style="animation-delay: 100ms">
      {categories.map((category, index) => (
        <button 
          class={`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${
            activeCategory === category 
              ? 'bg-blue-600 text-white shadow-md' 
              : 'bg-white dark:bg-gray-800 text-slate-700 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600'
          }`}
          on:click={() => activeCategory = category}
        >
          {category}
        </button>
      ))}
    </div>

    <!-- FAQ Accordion -->
    <div class="max-w-3xl mx-auto space-y-4">
      {faqData.map((item, index) => (
        <div 
          class={`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden animate-fade-in-up ${
            activeCategory !== "Semua" && activeCategory !== item.category ? 'hidden' : ''
          }`}
          style={`animation-delay: ${index * 100}ms`}
        >
          <button 
            class="faq-question flex items-center justify-between w-full p-6 text-left cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 rounded-xl"
            aria-expanded="false"
          >
            <div class="flex items-start space-x-4">
              <div class="flex-shrink-0 mt-1">
                <div class="w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center">
                  <span class="text-blue-600 dark:text-blue-400 text-sm font-bold">Q</span>
                </div>
              </div>
              <div>
                <span class="text-sm font-medium text-blue-600 dark:text-blue-400 mb-1">{item.category}</span>
                <h3 class="text-lg font-semibold text-slate-800 dark:text-white">{item.question}</h3>
              </div>
            </div>
            <span class="flex-shrink-0 ml-4 text-slate-500 dark:text-gray-400 transition-transform duration-300">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
            </span>
          </button>
          
          <div class="faq-answer overflow-hidden max-h-0 transition-all duration-500 ease-in-out">
            <div class="px-6 pb-6 pt-2">
              <div class="flex items-start space-x-4">
                <div class="flex-shrink-0 mt-1">
                  <div class="w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center">
                    <span class="text-green-600 dark:text-green-400 text-sm font-bold">A</span>
                  </div>
                </div>
                <p class="text-slate-600 dark:text-gray-300 leading-relaxed">
                  {item.answer}
                </p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- CTA Section -->
    <div class="text-center mt-16 animate-fade-in-up" style="animation-delay: 600ms">
      <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-800 rounded-2xl p-8 md:p-12 border border-gray-200 dark:border-gray-700">
        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z" />
          </svg>
        </div>
        <h3 class="text-2xl md:text-3xl font-bold text-slate-800 dark:text-white mb-4">
          Masih Ada Pertanyaan?
        </h3>
        <p class="text-slate-600 dark:text-gray-300 mb-6 max-w-2xl mx-auto">
          Tim support kami siap membantu menjawab semua pertanyaan Anda tentang layanan chatbot AI WhatsApp.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="https://wa.me/6285703846460" 
            target="_blank"
            class="inline-flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
            </svg>
            Hubungi via WhatsApp
          </a>
          <a 
            href="mailto:info@ftr.com" 
            class="inline-flex items-center bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-slate-800 dark:text-white font-semibold py-3 px-6 rounded-lg border border-gray-300 dark:border-gray-600 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-0.5"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
            Kirim Email
          </a>
        </div>
      </div>
    </div>
  </div>

  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      // FAQ Accordion functionality
      const faqQuestions = document.querySelectorAll('.faq-question');
      
      faqQuestions.forEach(question => {
        question.addEventListener('click', function() {
          const answer = this.nextElementSibling;
          const icon = this.querySelector('svg');
          
          // Toggle active class
          this.parentElement.classList.toggle('active');
          
          // Toggle answer visibility
          if (answer.style.maxHeight) {
            answer.style.maxHeight = null;
            icon.style.transform = 'rotate(0deg)';
            this.setAttribute('aria-expanded', 'false');
          } else {
            answer.style.maxHeight = answer.scrollHeight + 'px';
            icon.style.transform = 'rotate(180deg)';
            this.setAttribute('aria-expanded', 'true');
          }
        });
      });
      
      // Open first FAQ by default
      if (faqQuestions.length > 0) {
        faqQuestions[0].click();
      }
    });
  </script>

  <style>
    /* Animations */
    .animate-fade-in-up {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.8s ease forwards;
    }
    
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* FAQ Item active state */
    .faq-item.active {
      box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.1);
      border-color: rgba(59, 130, 246, 0.3);
    }
    
    /* Smooth transition for accordion */
    .faq-answer {
      transition: max-height 0.5s ease-in-out;
    }
  </style>
</section>